<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Flare</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="script-src 'self' 'unsafe-inline' 'unsafe-eval';"
    />
    <link rel="stylesheet" href="css/common.css" />
  </head>
  <body>
    <div id="main" class="player-main"></div>
  </body>
  <script type="text/javascript">
    window.addEventListener('load', (event) => {
      const container = document.getElementById('main')

      window.RufflePlayer = window.RufflePlayer || {}
      window.RufflePlayer.config = {
        autoPlay: 'auto',
        letterbox: 'on',
        polyfills: false,
        showSwfDownload: false,
        maxExecutionDuration: 15,
        logLevel: 'error',
        quality: 'low',
        preloader: false
      }

      const ruffle = window.RufflePlayer.newest()
      const rPlayer = ruffle.createPlayer()

      rPlayer.id = 'player'
      container.appendChild(rPlayer)

      rPlayer.load(`http://localhost:8080/swf-asset`).catch((e) => {
        // TODO: replace
        console.log(e)
      })
      rPlayer.addEventListener('oncontextmenu', (e) => e.preventDefault())
    })
  </script>
  <script src="js/ruffle/ruffle.js"></script>
</html>
